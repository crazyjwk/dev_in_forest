<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>index</title>

<!-- Custom fonts for this template-->
<link th:href="@{/vendor/fontawesome-free/css/all.min.css}"
	rel="stylesheet" type="text/css">
<link
	href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
	rel="stylesheet">

<!-- Custom styles for this template-->
<link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">

</head>

<body id="page-top">

	<!-- Page Wrapper -->
	<div id="wrapper">



		<!-- Content Wrapper -->
		<div id="content-wrapper" class="d-flex flex-column">

			<!-- Main Content -->
			<div id="content">

				<!-- Topbar -->
				<nav
					class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

					<!-- Sidebar Toggle (Topbar) -->
					<button id="sidebarToggleTop"
						class="btn btn-link d-md-none rounded-circle mr-3">
						<i class="fa fa-bars"></i>
					</button>


				</nav>
				<!-- End of Topbar -->

				<!-- Begin Page Content -->
				<div class="container-fluid pt-4 px-5 content">
					<!-- Content Row 1 -->
					<div class="row mt-3">




						<div class="col-xl-4 col-md-6 mb-4 px-3"></div>
						<!-- col end -->
						<!-- 관리자 설정 -->
						<div class="col-xl-4 col-md-6 mb-4 px-3">
							<div class="card shadow border-0 p-5">
								<!-- card Header -->
								<h4 class="text-dark font-weight-bold mb-4" align="center">Dev
									In Forest</h4>
								<!-- card Content -->
								<div class="row text-center mb-2">
									<div class="col-xl-12 mb-3">

										<form id="form" method="post" th:action="@{/addCompanyMember}">
											<input id="companyEmail" type="hidden" name="companyEmail"
												value=""> <input id="companyKorName" type="hidden"
												name="companyKorName" value=""> <input
												id="companyEngName" type="hidden" name="companyEngName"
												value="">
											<div>
												<div></div>
												<div>
													<div class="row">
														<div class="col-sm-7">
															<span class="companyEmailArea"> <input
																id="companyEmail2" class="form-control" type="email"
																name="companyEmail2" placeholder="이메일">
															</span>
														</div>
														<div class="col-sm-5">
															<button id="emailCheckBtn"
																class="btn btn-success btn-block " type="button">중복확인</button>
														</div>
													</div>
													<div align="center">
														<span id="emailMsg"></span>
													</div>

												</div>
											</div>
											<br>



											<div class="row">
												<div class="col-sm-7">
													<input id="companyKorName2" type="text"
														class="form-control" name="companyKorName2"
														placeholder="한국식 기업이름을 입력해주세요.">

												</div>
												<div class="col-sm-5">
													<button id="kornameCheckBtn"
														class="btn btn-success btn-block " type="button">중복확인</button>
												</div>
											</div>
											<div align="center">
												<span id="kornameMsg"></span>
											</div>
											<br>

											<div class="row">
												<div class="col-sm-7">
													<input id="companyEngName2" type="text"
														class="form-control" name="companyEngName2"
														placeholder="영어식 기업이름을 입력해주세요.">
												</div>
												<div class="col-sm-5">
													<button id="engnameCheckBtn"
														class="btn btn-success btn-block " type="button">중복확인</button>

												</div>
											</div>
											<div align="center">
												<span id="engnameMsg"></span>
											</div>
											<br>
											<div>
												<div>
													<input id="companyPw" type="password" name="companyPw"
														class="form-control" placeholder="비밀번호를 입력해주세요.">
												</div>
											</div>
											<br>
											<div>
												<div></div>
												<div>
													<input id="companyAddress" type="text" class="form-control"
														name="companyAddress" placeholder="회사주소를 입력해주세요.">
												</div>
											</div>
											<br>
											<div>
												<div></div>
												<div>
													<input id="companyPhone" type="text" name="companyPhone"
														class="form-control" placeholder="대표번호를 입력해주세요.">
												</div>
											</div>
											<br>
											<div>
												<button type="button" class="btn btn-success btn-block"
													id="signUpBtn">가입</button>
											</div>
										</form>
										<br>
										<div class="col-xl-12 mb-3">
											<div class="card border-0 bg-light text-center">

												<a class="nav-link text-info" th:href="@{/index}">인덱스</a>

											</div>
										</div>
									</div>
									<!-- row end -->
								</div>
								<!-- card end -->
							</div>
							<!-- col end -->
							<div class="col-xl-4 col-md-6 mb-4 px-3"></div>
						</div>
						<!-- /.container-fluid -->
					</div>
					<!-- End of Main Content -->

					<!-- Footer -->
					<footer class="sticky-footer bg-white">
						<div class="container my-auto">
							<div class="copyright text-center my-auto">
								<span>Copyright &copy; Your Website 2020</span>
							</div>
						</div>
					</footer>
					<!-- End of Footer -->

				</div>
				<!-- End of Content Wrapper -->

			</div>
			<!-- End of Page Wrapper -->

			<!-- Scroll to Top Button-->
			<a class="scroll-to-top rounded" href="#page-top"> <i
				class="fas fa-angle-up"></i>
			</a>

			<!-- Logout Modal-->
			<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog"
				aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">로그아웃</h5>
							<button class="close" type="button" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">×</span>
							</button>
						</div>
						<div class="modal-body">정말 로그아웃 하시겠습니까?</div>
						<div class="modal-footer">
							<button class="btn btn-secondary" type="button"
								data-dismiss="modal">취소</button>
							<a class="btn btn-primary" th:href="@{/logout}">로그아웃</a>
						</div>
					</div>
				</div>
			</div>

			<!-- Bootstrap core JavaScript-->
			<script th:src="@{/vendor/jquery/jquery.min.js}"></script>
			<script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>

			<!-- Core plugin JavaScript-->
			<script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>

			<!-- Custom scripts for all pages-->
			<script th:src="@{/js/sb-admin-2.min.js}"></script>
</body>
<script>
	// 회원가입 유효성 검사
	$('#signUpBtn').click(function(){		
		let pw = $('#companyPw').val();
		let address= $('#companyAddress').val();
		let phone = $('#companyPhone').val();
		let phoneNum = phone.search(/[0-9]/);
		let phoneEng = phone.search(/[a-z]/);
		let phoneSpe = phone.search(/[`~!@@#$%^&*|₩₩₩'₩";:₩/?]/);
		let phoneKor = phone.search(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/);
		let pwNum = pw.search(/[0-9]/);
		let pwEng = pw.search(/[a-z]/);
		let pwSpe = pw.search(/[`~!@@#$%^&*|₩₩₩'₩";:₩/?]/);
		
		// 아이디 중복체크 검사
		if($('#companyEmail').val() == ''){
			 alert("아이디를 중복체크 해주세요.");
			 return;
		}
		
		// 닉네임 중복체크 검사
		if($('#companyKorName').val() == ''){
			 alert("한글기업이름을 중복체크 해주세요.");
			 return;
		}
		if($('#companyEngName').val() == ''){
			 alert("영어기업이름을 중복체크 해주세요.");
			 return;
		}
		//대표번호 유효성 검사
		
		if(phoneEng != -1){
	 		alert("전화번호는 영어를 포함할 수 없습니다.");
		 	return;
		}
		if(phoneKor != -1){
	 		alert("전화번호는 한글을 포함할 수 없습니다.");
		 	return;
		}
		if(phoneSpe != -1){
	 		alert("전화번호는 특수문자를 포함할 수 없습니다.");
		 	return;
		}
		if(phone.search(/\s/) != -1){
	 		alert("전화번호는 공백 없이 입력해주세요.");
		 	return;
		}
		// 비밀번호 유효성 검사
		if(pw.length < 8 || pw.length > 20){
			 alert("비밀번호는 8자리 ~ 20자리 이내로 입력해주세요.");
			 return;
		}
		if(pw.search(/\s/) != -1){
			alert("비밀번호는 공백 없이 입력해주세요.");
			return;
		}
		if(pwNum < 0 || pwEng < 0 || pwSpe < 0 ){
		 	alert("영문, 숫자, 특수문자를 혼합하여 입력해주세요.");
			return;
		}
		console.log('유효성 검사 통과');
		$('#form').submit();
		
	});
	// 아이디 중복체크
	$('#emailCheckBtn').click(function(){
		
		let email = $('#companyEmail2').val();
		let emailNum = email.search(/[0-9]/);
		console.log(emailNum+" <- emailNum");
		let emailEng = email.search(/[a-z]/);
		console.log(emailEng+" <- emailEng");
		let emailBigEng = email.search(/[A-Z]/);
		console.log(emailBigEng+" <- emailBigEng");
		let emailKor = email.search(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/);
		console.log(emailKor+" <- emailKor");
		let emailSpe = email.search(/[`~!@@#$%^&*|₩₩₩'₩";:₩/?]/);
		console.log(emailSpe+" <- emailSpe");
		console.log("----------------------");
		
		if(email.length < 5 || email.length > 20){
			 alert("아이디는 5자리 ~ 20자리 이내로 입력해주세요.");
			 return;
		}
		if(email.search(/\s/) != -1){
	 		alert("아이디는 공백 없이 입력해주세요.");
		 	return;
		}
		
		
		
		let companyEmail2 = $('#companyEmail2').val();
		$.ajax({
            url:'/checkCompanyEmail'
            ,type:'POST'
            ,data:{'companyEmail2':companyEmail2}
            ,success : function(data) {
        		console.log(data);
        		$('#emailMsg').text(data);
        		if(data == "사용가능한 이메일입니다.") {
        			$('#companyEmail').val(email);
        		}else{
        			$('#companyEmail').val("");
        		}
            }
		});
	});
	
	$('#kornameCheckBtn').click(function(){
		$('#companyKorName').val('');
		let korname = $('#companyKorName2').val();
		let kornameNum = korname.search(/[0-9]/);
		let kornameEng = korname.search(/[a-z]/);
		let kornameSpe = korname.search(/[`~!@@#$%^&*|₩₩₩'₩";:₩/?]/);
		
		if(korname.length < 2 || korname.length > 10){
			 alert("닉네임은 2자리 ~ 10자리 이내로 입력해주세요.");
			 return;
		}
		if(kornameEng != -1){
	 		alert("한글은 한글로만 입력해주세요.");
		 	return;
		}
		if(korname.search(/\s/) != -1){
	 		alert("닉네임은 공백 없이 입력해주세요.");
		 	return;
		}
		if(kornameSpe != -1){
	 		alert("닉네임은 특수문자를 포함할 수 없습니다.");
		 	return;
		}
		
		let companyKorName2 = $('#companyKorName2').val();
		$.ajax({
            url:'/checkCompanyKorName'
            ,type:'POST'
            ,data:{'companyKorName2':companyKorName2}
            ,success : function(data) {
        		console.log(data);
        		$('#kornameMsg').text(data);
        		if(data == "사용가능한 닉네임입니다.") {
        			$('#companyKorName').val(korname);
        		}else{
        			$('#companyKorName').val("");
        		}
            }
		});
	});
	$('#engnameCheckBtn').click(function(){
		$('#companyEngName').val('');
		let engname = $('#companyEngName2').val();
		let engnameNum = engname.search(/[0-9]/);
		let engnameKor = engname.search(/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/);
		let engnameSpe = engname.search(/[`~!@@#$%^&*|₩₩₩'₩";:₩/?]/);
		
		if(engname.length < 2 || engname.length > 10){
			 alert("닉네임은 2자리 ~ 10자리 이내로 입력해주세요.");
			 return;
		}
		if(engname.search(/\s/) != -1){
	 		alert("닉네임은 공백 없이 입력해주세요.");
		 	return;
		}
		if(engnameSpe != -1){
	 		alert("닉네임은 특수문자를 포함할 수 없습니다.");
		 	return;
		}
		if(engnameKor != -1){
	 		alert("영문이름은 영문으로만 입력해주세요.");
		 	return;
		}
		let companyEngName2 = $('#companyEngName2').val();
		$.ajax({
            url:'/checkCompanyEngName'
            ,type:'POST'
            ,data:{'companyEngName2':companyEngName2}
            ,success : function(data) {
        		console.log(data);
        		$('#engnameMsg').text(data);
        		if(data == "사용가능한 닉네임입니다.") {
        			$('#companyEngName').val(engname);
        		}else{
        			$('#companyEngName').val("");
        		}
            }
		});
	});
	</script>
</html>